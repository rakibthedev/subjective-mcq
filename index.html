<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>All Primary Math MCQs (upto 2025)</title>

<!-- MathJax -->
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<style>
:root {
    --primary: #4f46e5;
    --success: #16a34a;
    --bg: #f8fafc;
    --card: #ffffff;
    --border: #e5e7eb;
    --radius: 16px;
    --shadow: 0 14px 40px rgba(0,0,0,.08);
}

body {
    padding: 40px 16px;
    font-family: system-ui, sans-serif;
    background: linear-gradient(180deg, #f8fafc, #eef2ff);
}

h2 {
    text-align: center;
    margin-bottom: 30px;
}

.mcq {
    max-width: 900px;
    margin: 0 auto 24px;
    background: var(--card);
    border-radius: var(--radius);
    padding: 22px 26px;
    box-shadow: var(--shadow);
}

.question {
    font-weight: 600;
    color: var(--primary);
    margin-bottom: 14px;
    cursor: pointer;
}

.options li {
    list-style: none;
    padding: 10px;
    margin-bottom: 8px;
    border: 1px solid var(--border);
    border-radius: 10px;
}

button {
    margin-top: 10px;
    background: linear-gradient(135deg, #4f46e5, #6366f1);
    color: #fff;
    border: none;
    padding: 10px 18px;
    border-radius: 999px;
    cursor: pointer;
}

.answer {
    display: none;
    margin-top: 14px;
    padding: 12px;
    background: #ecfdf5;
    color: var(--success);
    border-radius: 12px;
    font-weight: 600;
}

.explanation {
    margin-top: 10px;
    padding: 14px;
    background: #f1f5f9;
    border-radius: 12px;
    font-size: 15px;
    display: none;
}

.loading {
    color: #64748b;
    font-style: italic;
}
</style>
</head>

<body>

<h2>All Primary Math MCQs (upto 2025)</h2>
<div id="mcqContainer"></div>

<script>
/* ================= CONFIG ================= */
const GEMINI_API_KEY = "YOUR_GEMINI_API_KEY_AIzaSyDvKAMvIAaungoUjv00SiAm_rcDAPNgAds"; // üîë ADD KEY
const GEMINI_URL =
`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_API_KEY}`;
/* ========================================= */

// Convert MathML to text for prompt
function stripMath(text) {
    return text.replace(/<[^>]+>/g, "");
}

// Call Gemini API
async function getExplanation(question, options, answer) {
    const prompt = `
‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶è‡¶ï‡¶ú‡¶® ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞‡¶ø ‡¶ó‡¶£‡¶ø‡¶§ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶ï‡•§

‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®:
${question}

‡¶Ö‡¶™‡¶∂‡¶®:
‡¶ï) ${options[0]}
‡¶ñ) ${options[1]}
‡¶ó) ${options[2]}
‡¶ò) ${options[3]}

‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞: ${answer}

‡¶è‡¶á ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡¶ü‡¶ø ‡¶ß‡¶æ‡¶™‡ßá ‡¶ß‡¶æ‡¶™‡ßá ‡¶∏‡¶π‡¶ú ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡ßü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶ï‡¶∞‡ßã ‡¶Ø‡ßá‡¶® ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞‡¶ø ‡¶õ‡¶æ‡¶§‡ßç‡¶∞ ‡¶¨‡ßÅ‡¶ù‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§
`;

    const res = await fetch(GEMINI_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            contents: [{ parts: [{ text: prompt }] }]
        })
    });

    const data = await res.json();
    return data.candidates?.[0]?.content?.parts?.[0]?.text || "‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§";
}

// Load MCQs
fetch("json/primary_math.json")
.then(res => res.json())
.then(questions => {
    const container = document.getElementById("mcqContainer");

    questions.forEach((q, index) => {
        const mcq = document.createElement("div");
        mcq.className = "mcq";

        const question = document.createElement("div");
        question.className = "question";
        question.innerHTML = `Q${index + 1}. ${q.label}`;

        const ul = document.createElement("ul");
        ul.className = "options";

        q.options.forEach((opt, i) => {
            const li = document.createElement("li");
            li.innerHTML = `${String.fromCharCode(97 + i)}. ${opt}`;
            ul.appendChild(li);
        });

        const answerBox = document.createElement("div");
        answerBox.className = "answer";

        const explanationBox = document.createElement("div");
        explanationBox.className = "explanation";

        const correctIndex = q.answer.charCodeAt(0) - 97;
        const correctAnswer = q.options[correctIndex];

        answerBox.innerHTML = `‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞: ${correctAnswer}`;

        const btn = document.createElement("button");
        btn.textContent = "Show Answer";

        let loaded = false;

        btn.onclick = async () => {
            const visible = answerBox.style.display === "block";

            if (visible) {
                answerBox.style.display = "none";
                explanationBox.style.display = "none";
                btn.textContent = "Show Answer";
                return;
            }

            answerBox.style.display = "block";
            btn.textContent = "Hide Answer";

            if (!loaded) {
                explanationBox.style.display = "block";
                explanationBox.innerHTML = `<span class="loading">‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</span>`;

                const explanation = await getExplanation(
                    stripMath(q.label),
                    q.options.map(stripMath),
                    stripMath(correctAnswer)
                );

                explanationBox.innerHTML = `<strong>‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ:</strong><br>${explanation}`;
                loaded = true;
            } else {
                explanationBox.style.display = "block";
            }
        };

        mcq.append(question, ul, btn, answerBox, explanationBox);
        container.appendChild(mcq);

        MathJax.typesetPromise([mcq]);
    });
});
</script>

</body>
</html>
