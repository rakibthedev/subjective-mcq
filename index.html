<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>All Primary Math MCQs (upto 2025)</title>

<!-- MathJax CDN -->
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<style>
:root {
    --bg: #f4f6fb;
    --card: #ffffff;
    --primary: #4f46e5;
    --soft: #eef2ff;
    --text: #0f172a;
    --border: #e5e7eb;
    --success: #16a34a;
    --radius: 16px;
    --shadow: 0 14px 40px rgba(0,0,0,.08);
}

* { box-sizing: border-box; margin: 0; padding: 0; }
body { padding: 40px 16px; font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif; background: linear-gradient(180deg, #f8fafc, #eef2ff); color: var(--text); }
h2 { text-align: center; margin-bottom: 30px; font-size: 28px; }

/* MCQ card */
.mcq { max-width: 900px; margin: 0 auto 24px; background: var(--card); border-radius: var(--radius); padding: 22px 26px; box-shadow: var(--shadow); transition: transform 0.2s ease; }
.mcq:hover { transform: translateY(-2px); }

/* Question */
.question { font-size: 17px; font-weight: 600; color: var(--primary); cursor: pointer; margin-bottom: 14px; }
.question:hover { text-decoration: underline; }

/* Options */
.options { list-style: none; padding: 0; margin: 0 0 16px; }
.options li { padding: 10px 14px; margin-bottom: 10px; background: #f9fafb; border: 1px solid var(--border); border-radius: 12px; transition: background 0.2s; }
.options li:hover { background: var(--soft); }

/* Button */
button { background: linear-gradient(135deg, var(--primary), #6366f1); color: #fff; border: none; padding: 10px 18px; border-radius: 999px; font-weight: 600; cursor: pointer; transition: background 0.2s; }
button:hover { background: linear-gradient(135deg, #6366f1, var(--primary)); }

/* Answer */
.answer { margin-top: 14px; padding: 12px 16px; border-radius: 12px; background: #ecfdf5; color: var(--success); font-weight: 600; display: none; }

/* Mobile */
@media (max-width: 600px) {
    h2 { font-size: 22px; }
    .mcq { padding: 18px; }
}
</style>
</head>

<body>

<h2>All Primary Math MCQs (upto 2025)</h2>
<div id="mcqContainer"></div>

<script>
// Function to convert MathML to plain text
function mathMLToText(mathML) {
    const parser = new DOMParser();
    const xmlDoc = parser.parseFromString(mathML, "text/xml");

    function traverse(node) {
        if (!node) return "";
        switch (node.nodeName) {
            case "math":
            case "mrow":
                return Array.from(node.childNodes).map(traverse).join("");
            case "mn":
            case "mi":
                return node.textContent;
            case "mo":
                return node.textContent;
            case "mfrac":
                const numerator = traverse(node.childNodes[0]);
                const denominator = traverse(node.childNodes[1]);
                return `(${numerator}/${denominator})`;
            case "msup":
                const base = traverse(node.childNodes[0]);
                const exp = traverse(node.childNodes[1]);
                return `(${base}^${exp})`;
            default:
                return Array.from(node.childNodes).map(traverse).join("");
        }
    }

    return traverse(xmlDoc.documentElement);
}

// Convert all MathML in text
function convertMathMLInText(text) {
    const mathMLRegex = /<math[\s\S]*?<\/math>/g;
    return text.replace(mathMLRegex, (match) => mathMLToText(match));
}

// Fetch MCQs JSON
fetch("json/primary_math.json")
.then(res => res.json())
.then(questions => {
    const container = document.getElementById("mcqContainer");

    questions.forEach((q, index) => {
        const mcq = document.createElement("div");
        mcq.className = "mcq";

        // Question
        const question = document.createElement("div");
        question.className = "question";
        question.innerHTML = `Q${index + 1}. ${q.label}`;
        question.onclick = () => {
            // Convert MathML to plain text for Google search
            const searchText = convertMathMLInText(q.label);
            const url = "https://www.google.com/search?q=" + encodeURIComponent(searchText);
            window.open(url, "_blank");
        };

        // Options
        const ul = document.createElement("ul");
        ul.className = "options";
        q.options.forEach((opt, i) => {
            const li = document.createElement("li");
            li.innerHTML = `${String.fromCharCode(97 + i)}. ${opt}`;
            li.onclick = () => {
                // Optional: search option individually
                const searchText = convertMathMLInText(opt);
                const url = "https://www.google.com/search?q=" + encodeURIComponent(searchText);
                window.open(url, "_blank");
            };
            ul.appendChild(li);
        });

        // Answer
        const ans = document.createElement("div");
        ans.className = "answer";
        const correctIndex = q.answer.charCodeAt(0) - 97;
        ans.innerHTML = `Correct Answer: ${q.options[correctIndex]}`;

        // Toggle button
        const btn = document.createElement("button");
        btn.textContent = "Show Answer";
        btn.onclick = () => {
            const open = ans.style.display === "block";
            ans.style.display = open ? "none" : "block";
            btn.textContent = open ? "Show Answer" : "Hide Answer";
        };

        mcq.append(question, ul, btn, ans);
        container.appendChild(mcq);

        // Render MathML using MathJax
        MathJax.typesetPromise([mcq]);
    });
});
</script>

</body>
</html>
